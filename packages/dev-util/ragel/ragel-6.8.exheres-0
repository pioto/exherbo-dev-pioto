# Copyright 2009 Mike Kelly
# Distributed under the terms of the GNU General Public License v2

SUMMARY="Ragel State Machine Compiler"
DESCRIPTION="
Ragel compiles executable finite state machines from regular languages.
Ragel targets C, C++, Objective-C, D, Java and Ruby. Ragel state
machines can not only recognize byte sequences as regular expression
machines do, but can also execute code at arbitrary points in the
recognition of a regular language. Code embedding is done using inline
operators that do not disrupt the regular language syntax.
"
HOMEPAGE="http://www.complang.org/ragel/"
DOWNLOADS="${HOMEPAGE}/${PNV}.tar.gz"

LICENCES="GPL-2"
SLOT="0"
PLATFORMS="~amd64"
MYOPTIONS="go java mono objc ruby"

DEPENDENCIES="
    build+run:
        go?   ( sys-devel/gcc:=[go] )
        java? ( sys-devel/gcc:=[>=4.3][java] )
        mono? ( dev-lang/mono )
        objc? ( sys-devel/gcc:=[objc] )
        ruby? ( dev-lang/ruby:= )
"

BUGS_TO="pioto@exherbo.org"

# needs fig2dev and pdflatex
DEFAULT_SRC_CONFIGURE_PARAMS=( --disable-manual )

src_configure() {
    option go   || export GOBIN=no
    option java || export JAVAC=no
    option mono || export GMCS=no
    option objc || export OBJC=no
    option ruby || export RUBY=no

    default
}

